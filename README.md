# ZFSSnapUtil

ZFS のスナップショットをリモートのマシンにに転送するためのユーティリティ

ZFS はスナップショットを差分で転送するための機能がありますが、スナップショット
名などをいちいち調べるのが面倒なので、機械的に差分転送が行えるスクリプトを作成しました。

## 前提条件

スナップショット名は日付を入れるなど、辞書順が新旧を表すようにしておかなければなりません。
（同梱の `createsnap.sh` を利用すればそのような名前になります）

## `createsnap.sh`

対象のボリュームに `snap-YYYYMMDD-HHMMSS` というスナップショットを作成する。

## `fullrecv.sh`

リモートから最新のスナップショットを SSH を使ってローカルに転送する。

## `inclrecv.sh`

リモートとローカルに共通のスナップショットが存在すれば、そのスナップショットを起点として差分転送を行う。

## `oldsnapdelete.sh`

ローカルのスナップショットを規定数（デフォルトで10個）になるように古いものから順に削除する。

